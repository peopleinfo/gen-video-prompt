<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Image Gallery</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="container">
      <div class="header-row">
        <h1>Prompt Chat</h1>
        <button id="openApi" class="link-button" type="button">API</button>
      </div>

      <div class="tabs" role="tablist">
        <button
          class="tab active"
          data-tab="prompt"
          type="button"
          role="tab"
          aria-selected="true"
        >
          Prompt
        </button>
        <button
          class="tab"
          data-tab="chat"
          type="button"
          role="tab"
          aria-selected="false"
        >
          Chat
        </button>
        <button
          class="tab"
          data-tab="gui"
          type="button"
          role="tab"
          aria-selected="false"
        >
          AI GUI
        </button>
      </div>

      <section
        class="tab-content active"
        id="tab-prompt"
        data-active="true"
        role="tabpanel"
      >
        <div class="prompt-box">
          <textarea
            id="promptInput"
            placeholder="Type a prompt to send to ChatGPT..."
            rows="4"
          ></textarea>
          <div class="prompt-actions">
            <button id="fillPrompt" class="btn btn-secondary">
              Fill Prompt
            </button>
            <button id="sendPrompt" class="btn btn-primary">Send Prompt</button>
          </div>
        </div>

        <div class="prompt-box">
          <div class="section-label">Send Queue</div>
          <textarea
            id="queuePromptInput"
            placeholder="Queue prompt suffix. Use {numOfQueue} to insert the queue number."
            rows="3"
          ></textarea>
          <div class="queue-controls">
            <label for="queueCount">Queue count</label>
            <input id="queueCount" type="number" min="1" value="3" />
            <label for="queueInterval">Interval (sec)</label>
            <input id="queueInterval" type="number" min="0" step="0.5" value="5" />
          </div>
          <div class="prompt-actions">
            <button id="sendPromptQueue" class="btn btn-primary">
              Send Queue
            </button>
          </div>
          <div id="queueStatus" class="inline-status"></div>
        </div>

        <div class="controls">
          <button id="downloadAll" class="btn btn-primary">
            Download All as ZIP
          </button>
          <button id="clearAll" class="btn btn-danger">Clear All</button>
        </div>

        <div id="gallery" class="gallery">
          <p class="empty-message">
            No images yet. Use the buttons on ChatGPT to generate images!
          </p>
        </div>
      </section>

      <section
        class="tab-content"
        id="tab-chat"
        data-active="false"
        role="tabpanel"
      >
        <div class="chat-box">
          <textarea id="chatPrompt" placeholder="LLM Chat" rows="4"></textarea>
          <div class="chat-actions">
            <button id="sendChat" class="btn btn-secondary">Chat</button>
            <button id="abortChat" class="btn btn-danger" disabled>
              Abort
            </button>
          </div>
        </div>
        <div id="chatOutput" class="chat-output"></div>
        <button id="useChatOutput" class="btn btn-small">
          Use Response as Prompt
        </button>
      </section>

      <section
        class="tab-content"
        id="tab-gui"
        data-active="false"
        role="tabpanel"
      >
        <div class="iframe-wrap">
          <iframe
            title="AI GUI"
            src="about:blank"
            data-src="https://localhost:3333/"
            loading="lazy"
            allow="clipboard-read; clipboard-write"
          ></iframe>
        </div>
      </section>

      <div id="status" class="status"></div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
