<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Image Gallery</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="container">
      <div class="header-row">
        <h1>Prompt Chat</h1>
        <button id="openApi" class="link-button" type="button">API</button>
      </div>

      <div class="tabs" role="tablist">
        <button
          class="tab active"
          data-tab="prompt"
          type="button"
          role="tab"
          aria-selected="true"
        >
          Prompt
        </button>
        <button
          class="tab"
          data-tab="chat"
          type="button"
          role="tab"
          aria-selected="false"
        >
          Chat
        </button>
        <button
          class="tab"
          data-tab="gui"
          type="button"
          role="tab"
          aria-selected="false"
        >
          AI GUI
        </button>
        <button
          class="tab"
          data-tab="cookies"
          type="button"
          role="tab"
          aria-selected="false"
        >
          Cookies
        </button>
      </div>

      <section
        class="tab-content active"
        id="tab-prompt"
        data-active="true"
        role="tabpanel"
      >
        <div class="prompt-box">
          <div class="section-label">Head Prompt</div>
          <textarea
            id="headPromptInput"
            rows="2"
            placeholder="Head prompt (Default: Read movie and remember main actor) and don't explain me back just remember and wait for my next prompt"
            style="margin-bottom: 8px"
          ></textarea>
          <div class="file-input-container">
            <input type="file" id="imageInput" accept="image/*" />
            <div id="imagePreviewName" class="file-name"></div>
          </div>
          <div
            style="
              margin-bottom: 8px;
              display: flex;
              align-items: center;
              gap: 8px;
            "
          >
            <label for="imageDelay" style="font-size: 12px; color: #888"
              >Image Wait (s):</label
            >
            <input
              type="number"
              id="imageDelay"
              min="0"
              value="20"
              style="
                width: 60px;
                padding: 4px;
                border-radius: 4px;
                border: 1px solid #444;
                background: #222;
                color: #eee;
              "
            />
          </div>
          <textarea
            id="promptInput"
            placeholder="Type a prompt to send to ChatGPT..."
            rows="4"
          ></textarea>
          <div class="prompt-actions">
            <button id="fillPrompt" class="btn btn-secondary">
              Fill Prompt
            </button>
            <button id="sendPrompt" class="btn btn-primary">Send Prompt</button>
            <button id="sendPromptAndQueue" class="btn btn-secondary">
              Send Prompt + Queue
            </button>
            <button id="cancelSend" class="btn btn-danger" disabled>
              Stop
            </button>
          </div>
        </div>

        <div class="prompt-box">
          <div class="section-label">
            Send Queue, eg. give first frame image part {numOfQueue} only one
            main actor in frame. eg. i correct you plz don't give me two pic in
            one images
          </div>
          <textarea
            id="queuePromptInput"
            placeholder="Queue prompt suffix. Use {numOfQueue} to insert the queue number."
            rows="3"
            value="Give first frame image part {numOfQueue} only one main actor in frame. eg. i correct you plz don't give me two pic in one images"
          ></textarea>
          <div class="queue-controls">
            <label for="queueCount">Queue count</label>
            <input id="queueCount" type="number" min="1" value="3" />
            <label for="queueInterval">Interval (sec)</label>
            <input
              id="queueInterval"
              type="number"
              min="0"
              step="0.5"
              value="25"
            />
          </div>
          <div class="prompt-actions">
            <button id="sendPromptQueue" class="btn btn-primary">
              Send Queue
            </button>
            <button id="cancelQueue" class="btn btn-danger" disabled>
              Stop Queue
            </button>
          </div>
          <div id="queueStatus" class="inline-status"></div>
        </div>

        <div class="prompt-box">
          <!-- <div class="section-label">Scrape images</div>
          <textarea
            id="scrapeHtml"
            placeholder="Paste HTML with <img> tags or og:image meta tags"
            rows="4"
          ></textarea> -->
          <div class="scrape-actions">
            <!-- <button id="scrapeImages" class="btn btn-secondary" type="button">
              Scrape
            </button> -->
            <button id="scrapeFromDom" class="btn btn-secondary" type="button">
              Scrape page
            </button>
            <button id="refreshScrape" class="btn btn-secondary" type="button">
              Refresh
            </button>
            <button id="clearScrape" class="btn btn-danger" type="button">
              Clear
            </button>
            <button
              id="selectAllScrape"
              class="btn btn-secondary"
              type="button"
            >
              Select all
            </button>
            <button
              id="downloadScrapeZip"
              class="btn btn-primary"
              type="button"
              disabled
            >
              Download selected
            </button>
            <div id="scrapeStatus" class="inline-status"></div>
            <div class="scrape-filters">
              <label
                ><input type="radio" name="scrapeFilter" value="all" checked />
                All</label
              >
              <label
                ><input type="radio" name="scrapeFilter" value="image" /> Images
                (GPT)</label
              >
              <label
                ><input type="radio" name="scrapeFilter" value="video" /> Videos
                (Sora)</label
              >
              <label
                ><input type="checkbox" id="scrapeLimitCheckbox" checked />
                Limit (<input
                  type="number"
                  id="scrapeLimitCount"
                  min="1"
                  style="
                    width: 40px;
                    padding: 0 4px;
                    border: 1px solid #3f3f46;
                    background: #27272a;
                    color: #fff;
                    border-radius: 4px;
                    height: 20px;
                    font-size: 11px;
                  "
                />)</label
              >
            </div>
          </div>
          <div id="scrapeGallery" class="scrape-gallery">
            <p class="empty-message">Paste HTML and click Scrape.</p>
          </div>
        </div>
      </section>

      <section
        class="tab-content"
        id="tab-chat"
        data-active="false"
        role="tabpanel"
      >
        <div class="chat-box">
          <textarea id="chatPrompt" placeholder="LLM Chat" rows="4"></textarea>
          <div class="chat-actions">
            <button id="sendChat" class="btn btn-secondary">Chat</button>
            <button id="abortChat" class="btn btn-danger" disabled>
              Abort
            </button>
          </div>
        </div>
        <div id="chatOutput" class="chat-output"></div>
        <button id="useChatOutput" class="btn btn-small">
          Use Response as Prompt
        </button>
      </section>

      <section
        class="tab-content"
        id="tab-gui"
        data-active="false"
        role="tabpanel"
      >
        <div class="iframe-wrap">
          <iframe
            title="AI GUI"
            src="about:blank"
            data-src="https://localhost:3333/"
            loading="lazy"
            allow="clipboard-read; clipboard-write"
          ></iframe>
        </div>
      </section>

      <section
        class="tab-content"
        id="tab-cookies"
        data-active="false"
        role="tabpanel"
      >
        <div class="prompt-box">
          <div class="section-label">Site</div>
          <div class="cookie-controls">
            <input
              id="cookieUrl"
              type="text"
              placeholder="https://example.com"
            />
            <button
              id="cookieUseActive"
              class="btn btn-secondary"
              type="button"
            >
              Use active tab
            </button>
            <button id="cookieRefresh" class="btn btn-primary" type="button">
              Refresh
            </button>
          </div>
          <div class="cookie-actions">
            <button id="cookieCopyJson" class="btn btn-secondary" type="button">
              Copy JSON
            </button>
            <button id="cookieClear" class="btn btn-danger" type="button">
              Clear site
            </button>
          </div>
          <div id="cookieStatus" class="inline-status"></div>
        </div>

        <div class="prompt-box">
          <div class="section-label">Cookies</div>
          <input
            id="cookieFilter"
            class="cookie-filter"
            type="text"
            placeholder="Filter by name or value"
          />
          <div id="cookieList" class="cookie-list">
            <p class="empty-message">No cookies loaded.</p>
          </div>
        </div>
      </section>

      <div id="status" class="status"></div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
